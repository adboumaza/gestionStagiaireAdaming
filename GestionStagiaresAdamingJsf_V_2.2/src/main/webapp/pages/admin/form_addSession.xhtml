<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition>
	<br> </br>
	<br> </br>
	<br> </br>
	<div class="well container">
	       <br/>
			<!-- exception add new Session -->
			<c:if test="#{not empty sessionBean.addSessionException}">
				<div class="alert alert-warning">
					<h:outputText value="#{sessionBean.addSessionException}"
							styleClass="errorExeption"/>
				</div>
			</c:if>
			<!-- message success -->
			<c:if test="#{not empty sessionBean.succes}">
				<div class="alert alert-info">
					<h:outputText value="#{sessionBean.succes}"
							styleClass="messageSuccess" />
				</div>
			</c:if>
	     <!-- errors de validation -->
	     <h:messages style="color:red;"></h:messages>
		 <!-- Form validations -->  
		 <section class="wrapper">
		  <div class="row">
				<div class="col-lg-12">
					<ol class="breadcrumb">
						<h3 class="page-header"><i><h:graphicImage name="NiceAdmin/img/form.png"/> </i> Form Session</h3>
					</ol>
				</div>
			</div>            
              <div class="row">
                  <div class="col-lg-12">
                      <section class="panel">
                          <header class="panel-heading">
                              Ajouter Une Session
                          </header>
                          <div class="panel-body">
                              <div class="form">
                                  <h:form class="form-validate form-horizontal">
                                      <div class="form-group ">
                                          <label for="formation" class="control-label col-lg-2">Formation <span class="required">*</span></label>
                                          <div class="col-lg-10">
                                              <h:selectOneMenu style="height:35px;width:25%;color:#797979;font-size:16px;" styleClass="selectpicker" required="true"
												requiredMessage="1 - formation *"
												value="#{sessionBean.idSpecialite}">
												<f:selectItem itemLabel="Sélectionnez Une Formation" itemValue="#{null}" noSelectionOption="true" />
												<f:selectItems value="#{specialiteBean.specialites}" var="spec"
												itemLabel="#{spec.designation}" itemValue="#{spec.idSpecialite}" />
											</h:selectOneMenu>
                                          </div>
                                      </div>
                                      <div class="form-group ">
                                          <label for="lieu" class="control-label col-lg-2">Lieu <span class="required">*</span></label>
                                          <div class="col-lg-10">
                                              <h:inputText requiredMessage="2 - Lieu *" required="true" value="#{sessionBean.lieu}" class="form-control" id="lieu"  type="text" />
                                          </div>
                                      </div>
                                      <div class="form-group ">
                                          <label for="effect" class="control-label col-lg-2">Début<span class="required">*</span></label>
                                          <div class="col-lg-10">
                                              <p:calendar styleClass="calendar" id="effect"
												value="#{sessionBean.dateDebute}"  effect="fold" required="true"
												required-message="3 - début * " />
                                          </div>
                                      </div>
                                      <div class="form-group ">
                                          <label for="effect2" class="control-label col-lg-2">Fin<span class="required">*</span></label>
                                          <div class="col-lg-10">
                                              <p:calendar styleClass="calendar" id="effect2"
												value="#{sessionBean.dateFin}"  effect="fold" required="true"
												required-message="4 - Fin * " />
                                          </div>
                                      </div>
                                      <div class="form-group">
                                          <div class="col-lg-offset-2 col-lg-10">
                                              <h:commandButton action="#{sessionBean.addSession}" update="@form" value="Save" class="btn btn-primary"/>
                                          </div>
                                      </div>
                                      <!-- data table -->
                                        <br />
										<br />
										<div align="center">
											<p:dataTable var="newSession" value="#{sessionBean.sessions}"
												id="studentTable"
												paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
												rowsPerPageTemplate="5,10,15" paginator="true" rows="10"
												style="width:910px;margin-bottom:20px;">
							
												<f:facet name="{Exporters}">
													<p:commandLink ajax="false" style="float:right;"
														title="Fichier XML">
														<p:graphicImage name="NiceAdmin/img/xml.png" width="24" />
														<p:dataExporter type="xml" target=":form:studentTable"
															fileName="Sessions" />
													</p:commandLink>
							
													<p:commandLink ajax="false" style="float:right;"
														title="Fichier CSV">
														<p:graphicImage name="NiceAdmin/img/csv.png" width="24" />
														<p:dataExporter type="csv" target=":form:studentTable"
															fileName="Sessions" />
													</p:commandLink>
							
													<p:commandLink ajax="false" style="float:right;"
														title="Fichier PDF">
														<p:graphicImage name="NiceAdmin/img/pdf.png" width="24" />
														<p:dataExporter type="pdf" target=":form:studentTable"
															fileName="Sessions" />
													</p:commandLink>
							
													<p:commandLink ajax="false" style="float:right;"
														title="Fichier EXCEL">
														<p:graphicImage name="NiceAdmin/img/excel.png" width="24" />
														<p:dataExporter type="xls" target=":form:studentTable"
															fileName="Sessions" />
													</p:commandLink>
												</f:facet>
												<p:column style="width:50px;">
													<f:facet name="header">
														<h:outputText value="Numero Session" />
													</f:facet>
													<h:outputText value="#{newSession.idSession}" />
												</p:column>
												<p:column style="width:50px;">
													<f:facet name="header">
														<h:outputText value="Specialitee" />
													</f:facet>
													<h:outputText value="#{newSession.specialite.designation}" />
												</p:column>
												<p:column style="width:50px;">
													<f:facet name="header">
														<h:outputText value="Lieu " />
													</f:facet>
													<h:outputText value="#{newSession.lieu}" />
												</p:column>
												<p:column style="width:50px;">
													<f:facet name="header">
														<h:outputText value="Debut" />
													</f:facet>
													<h:outputText value="#{newSession.dateDebute}" />
												</p:column>
												<p:column style="width:50px;">
													<f:facet name="header">
														<h:outputText value="Fin" />
													</f:facet>
													<h:outputText value="#{newSession.dateFin}" />
												</p:column>
												<p:column style="width:50px;">
													<f:facet name="header">
														<h:outputText value="Statut" />
													</f:facet>
													<h:outputText value="#{newSession.etatSession}" />
												</p:column>
												<p:column style="width:50px;text-align:center;">
													<f:facet name="header">
														<h:outputText value="Actions" />
													</f:facet>
													<p:commandLink oncomplete="PF('carDialog').show()"
														update=":form3:sessionDetail" title="Modifier">
														 <h:graphicImage name="NiceAdmin/img/pencil.png" style="width:20px;height:20px"></h:graphicImage>
														<f:param value="#{newSession.idSession}" name="idSession" />
														<f:param value="#{newSession.specialite.idSpecialite}"
															name="idSpecialite" />
														<p:ajax update=":form3:sessionDetail" event="click"
															listener="#{sessionBean.getCurrentSession(newSession.idSession)}" />
													</p:commandLink>
												</p:column>
											</p:dataTable>
										</div>
                                  </h:form>
                                  <h:form id="form3">
									<p:dialog header="Session Info" widgetVar="carDialog" modal="true"
										showEffect="blind" hideEffect="explode" resizable="false">
										<p:outputPanel id="sessionDetail" style="text-align:center;">
											<h:inputHidden value="#{sessionBean.sessionEtudiant.idSession}" />
											<br />
											<h:inputHidden
												value="#{sessionBean.sessionEtudiant.specialite.idSpecialite}" />
											<br />
											<h:outputText value="Date début" />
											<br />
											<p:calendar value="#{sessionBean.sessionEtudiant.dateDebute}" />
											<br />
											<h:outputText value="Date fin" />
											<br />
											<p:calendar value="#{sessionBean.sessionEtudiant.dateFin}" />
											<br />
											<h:outputText value="Lieu" />
											<br />
											<h:inputText value="#{sessionBean.sessionEtudiant.lieu}" />
											<br />
										</p:outputPanel>
										<br />
										<br />
										<p:commandButton value="Modifier"
											action="#{sessionBean.edit(sessionBean.sessionEtudiant,sessionBean.sessionEtudiant.specialite.idSpecialite)}" />
									</p:dialog>
		                       </h:form>
                              </div>
                          </div>
                      </section>
                  </div>
              </div>
          </section>
	</div>
</ui:composition>
</html>

