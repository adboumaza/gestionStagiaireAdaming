
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:pe="http://primefaces.org/ui/extensions">
	
    
<ui:composition>
    <br> </br>
	<br> </br>
	<br> </br>
<div class="well container">
        <section class="wrapper">
           <div class="row">
				<div class="col-lg-12">
					<ol class="breadcrumb">
						<h3 class="page-header"><i><h:graphicImage name="NiceAdmin/img/dashboard.png"/> </i> Dashboard</h3>
					</ol>
				</div>
			</div>   
			<div class="row">
			<div class="col-lg-12">
			 <section class="panel">
			   <div class="panel-body">
			        <header class="panel-heading">
                          <h4>Session En Cours</h4>
                      </header>
                     <div class="panel-body text-center">
                            
							     <form>
									<table class="table bootstrap-datatable countries">
										<thead>
											<tr>
												<th>Formation</th>
												<th>Date Début</th>
												<th>Date Fin</th>
												<th>Lieu</th>
												<th>Progressions</th>
											</tr>
										</thead>  
										 <ui:repeat value="#{dashboardBean.sessionsInProgress}" var="x"> 
										<tbody>
											<tr>
											    <td>#{x.specialite.designation}</td>
												<td>#{x.dateDebute}</td>
												<td>#{x.dateFin}</td>
												<td>#{x.lieu}</td>
												<td style="width:300px">
							                    <b:progressBar  look="danger" animated="true"
													value="#{x.dateDebuteInDays}" min="0" max="#{x.dateFinInDays}"
													tooltip="large-screen='two-thirds'" large-screen="two-thirds" />
											    </td>
										    </tr>
										</tbody>
										  </ui:repeat>
							        </table>
							</form>
						
							</div>
					   </div>
			   </section>
			</div>
	  </div>
			 <div class="row">
              <!-- chart morris start -->
              <div class="col-lg-12">
                  <section class="panel">
                      <header class="panel-heading">
                          <h4>Evénement de cette Semaine</h4>
                      </header>

                      <div class="panel-body">
                            <div class="tab-pane" id="chartjs">
                                  <div class="row">
                                      <!-- Line -->
                                      <div class="col-lg-6">
                                          <section class="panel">
                                              <header class="panel-heading">
                                                  Retard
                                              </header>
                                               <div class="panel-body text-center">
                                               <c:if test="#{fn:length(dashboardBean.retards) >0 }">
                                                 <h:form>
	                                                 <p:dataTable paginator="true" rows="5" value="#{dashboardBean.retards}" var="r">
							                              <f:facet name="header">
													         <h:outputText value="Liste Des Retards " />
												         </f:facet>
												          <p:column style="width:80px;">
															<f:facet name="header">
																<h:outputText value="N° Session" />
															</f:facet>
															<h:outputText value="#{r.sessionEtudiant.idSession}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="Nom" />
															</f:facet>
															<h:outputText value="#{r.etudiant.nomEtudiant}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="prénom" />
															</f:facet>
															<h:outputText value="#{r.etudiant.prenomEtudiant}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="Durée" />
															</f:facet>
															<h:outputText value="#{r.dureeInHours}h #{r.dureeInMinute}min" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="Date" />
															</f:facet>
															<h:outputText value="#{r.startDate}" />
														</p:column>
							                          </p:dataTable> 
						                          </h:form>
							                    </c:if>
							                    <!-- exception retard not found -->
							                    <c:if test="#{not empty dashboardBean.retardNotFoundException}">
							                    <p style="color:red">
							                      #{dashboardBean.retardNotFoundException}
							                    </p>
							                    </c:if>
                                              </div>
							               
                                          </section>
                                      </div>                      
                                      <!-- end Bar sessions en cours -->
                                      <div class="col-lg-6">
                                          <section class="panel">
                                              <header class="panel-heading">
                                                  Absence
                                              </header>
                                              <div class="panel-body text-center">
                                               <c:if test="#{fn:length(dashboardBean.absences) >0 }">
                                                  <h:form>
	                                                 <p:dataTable paginator="true" rows="5" value="#{dashboardBean.absences}" var="r">
							                              <f:facet name="header">
													         <h:outputText value="Liste Des Absences " />
												         </f:facet>
												          <p:column style="width:80px;">
															<f:facet name="header">
																<h:outputText value="N° Session" />
															</f:facet>
															<h:outputText value="#{r.sessionEtudiant.idSession}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="Nom" />
															</f:facet>
															<h:outputText value="#{r.etudiant.nomEtudiant}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="prénom" />
															</f:facet>
															<h:outputText value="#{r.etudiant.prenomEtudiant}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="De" />
															</f:facet>
															<h:outputText value="#{r.startDate}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="A" />
															</f:facet>
															<h:outputText value="#{r.endDate}" />
														</p:column>
							                          </p:dataTable> 
						                          </h:form>
							                </c:if>
							                 <!-- exception absence not found -->
							                <c:if test="#{not empty dashboardBean.absenceNotFoundException}">
							                  <p style="color:red"> #{dashboardBean.absenceNotFoundException}</p>
							                 </c:if>
                                              </div>
                                          </section>
                                      </div>
                                  </div>
                                  <div class="row">
                                      <!-- Radar -->
                                      <div class="col-lg-6">
                                          <section class="panel">
                                              <header class="panel-heading">
                                                  Entretien
                                              </header>
                                              <div class="panel-body text-center">
                                              <c:if test="#{fn:length(dashboardBean.entretiens) >0 }">
                                                 <h:form>
	                                                 <p:dataTable paginator="true" rows="5" value="#{dashboardBean.entretiens}" var="r">
							                              <f:facet name="header">
													         <h:outputText value="Liste Des Entretiens " />
												         </f:facet>
												          <p:column style="width:80px;">
															<f:facet name="header">
																<h:outputText value="N° Session" />
															</f:facet>
															<h:outputText value="#{r.sessionEtudiant.idSession}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="Nom" />
															</f:facet>
															<h:outputText value="#{r.etudiant.nomEtudiant}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="prénom" />
															</f:facet>
															<h:outputText value="#{r.etudiant.prenomEtudiant}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="De" />
															</f:facet>
															<h:outputText value="#{r.startDate}" />
														</p:column>
														<p:column style="width:100px;">
															<f:facet name="header">
																<h:outputText value="A" />
															</f:facet>
															<h:outputText value="#{r.endDate}" />
														</p:column>
							                          </p:dataTable> 
						                          </h:form>
							                </c:if>
							               <!-- exception entretien not found -->
							                <c:if test="#{not empty dashboardBean.entretienNotFoundException}">
							               <p style="color:red">
							                   #{dashboardBean.entretienNotFoundException}
							                </p>
							                </c:if>
                                              </div>
                                          </section>
                                      </div>
                                  </div>
                            </div>
                      </div>
                  </section>
              </div>
          </div>
       </section>
       <!-- Evenements par Session -->
       <div class="row">
			<div class="col-lg-12">
				<section class="panel">
					<div class="panel-body">
						<header class="panel-heading">
							<h4>Evenements par session</h4>
						</header>
						<h:form >
							<div class="form-group ">
								<label for="session" class="control-label col-lg-2">Session
									En Cours <span class="required">*</span>
								</label>
								<div class="col-lg-10">
									<h:selectOneMenu
										style="height:35px;width:50%;color:#797979;font-size:16px;"
										styleClass="selectpicker" required="true"
										required-message="1 - Session *"
										value="#{dashboardBean.idSession}">
										<f:selectItem itemLabel="Sélectionnez Votre Session "
											itemValue="#{null}" />
										<f:selectItems value="#{dashboardBean.sessionsInProgress}" var="s"
											itemLabel="Session N°:#{s.idSession}, #{s.specialite.designation},Lieu : #{s.lieu}, Début:#{s.dateDebute}"
											itemValue="#{s.idSession}" />
									<p:ajax event="valueChange" update="tabEvent" 
										listener="#{dashboardBean.getEvenementEnCours}"/>
									</h:selectOneMenu>
								</div>
							</div>
							
							<!-- Datatable Evenement avec Selections -->
							<p:dataTable var="event" value="#{dashboardBean.evenementsSession}" widgetVar="carsTable"
                 				emptyMessage="Aucuns events avec ces paramètres" id="tabEvent">
 
						        <f:facet name="header">
						            <p:outputPanel>
						                <h:outputText value="Search all fields:" />
						                <p:inputText id="globalFilter" onkeyup="PF('carsTable').filter()" style="width:150px" placeholder="Enter keyword"/>
						            </p:outputPanel>
						        </f:facet>
						 
						        <p:column filterBy="#{event.etudiant.nomEtudiant}" headerText="Etudiant" filterMatchMode="contains">
						            <h:outputText value="#{event.etudiant.nomEtudiant}" />
						        </p:column>
						        
						       <p:column filterBy="#{event.typeEvenement}" headerText="Evenement" filterMatchMode="in">
						            <f:facet name="filter">
						                <p:selectCheckboxMenu label="Type" onchange="PF('carsTable').filter()" panelStyle="width:125px" scrollHeight="150">
						                    <f:selectItems value="#{dashboardBean.typesEvenement}" />
						                </p:selectCheckboxMenu>
						            </f:facet>
						            <h:outputText value="#{event.typeEvenement}" />
						        </p:column>
						 		 				 
						        <p:column headerText="Date D" sortBy="#{event.startDate}">
						            <h:outputText value="#{event.startDate}" />
						        </p:column>
						        
						        <p:column headerText="Date F" sortBy="#{event.endDate}">
						            <h:outputText value="#{event.endDate}" />
						        </p:column>
						    </p:dataTable>
					</h:form>							
					</div>
				</section>
			</div>
		</div>
       
       
    </div>
</ui:composition>
</html>