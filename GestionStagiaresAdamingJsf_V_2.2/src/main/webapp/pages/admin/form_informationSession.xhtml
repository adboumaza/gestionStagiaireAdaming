<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">

<ui:composition>
	<br> </br>
	<br> </br>
	<br> </br>
	<div class="well container">
		
		 <!-- Form validations -->  
		 <section class="wrapper">
		  <div class="row">
				<div class="col-lg-12">
					<ol class="breadcrumb">
						<h3 class="page-header"><i><h:graphicImage name="NiceAdmin/img/form.png"/> </i> Form Information Session</h3>
					</ol>
				</div>
			</div>            
              <div class="row">
                  <div class="col-lg-12">
                      <section class="panel">
                          <header class="panel-heading">
                              Information Session
                          </header>
                          <p:growl id="growl" autoUpdate="true" severity="warning" showSummary="true" showDetail="true" ></p:growl>
                          <div class="panel-body">
                              
                                  <h:form>
                                   <div style="margin:auto!important;text-align:center;width:70%!important">
                                        <br></br>
    								    <br></br>
                                       <p:selectOneRadio columns="1" layout="grid" value="#{sessionBean.choix}">
									        <f:selectItem itemLabel="TeamLeader" itemValue="TOP" />
									        <f:selectItem itemLabel="blackList" itemValue="WARNING" />
									        <f:selectItem itemLabel="Absence" itemValue="ABSENCE" />
									        <f:selectItem itemLabel="Retard" itemValue="RETARD" />
									        <f:ajax  listener="#{sessionBean.getMoreInformation(sessionBean.sessionEtudiant.idSession,sessionBean.choix)}" render="@form idEvent" />
    									</p:selectOneRadio>
    								</div>
    								    <br></br>
    								    <br></br>
    								    
    									<p:dataTable rendered="#{sessionBean.evenements.size() > 0}" id="idEvent" var="event" value="#{sessionBean.evenements}">
										    <f:facet name="header">
										        #{sessionBean.choix}
										    </f:facet>
 
										    <p:column headerText="Nom">
										        <h:outputText value="#{event.etudiant.nomEtudiant}" />
										    </p:column>
										    <p:column headerText="Prénom">
										        <h:outputText value="#{event.etudiant.prenomEtudiant}" />
										    </p:column>
										    <p:column headerText="Tél">
										        <h:outputText value="#{event.etudiant.numTel}" />
										    </p:column>
										     <p:column headerText="Mail">
										        <h:outputText value="#{event.etudiant.mail}" />
										    </p:column>
										    <c:if test="#{sessionBean.choix eq 'ABSENCE'}">
												<p:column headerText="De">
													<h:outputText  value="#{event.startDate}" />
												</p:column>
												<p:column headerText="A">
													<h:outputText value="#{event.endDate}" />
												</p:column>
											</c:if>
											
											<c:if test="#{sessionBean.choix eq 'RETARD'}">
												<p:column headerText="Durée">
														<h:outputText rendered="#{(event.endDate.time - event.startDate.time)/(1000*60) gt 60}" value="#{(event.endDate.time - event.startDate.time)/(1000*60*60)} hrs"/>
														<h:outputText rendered="#{(event.endDate.time - event.startDate.time)/(1000*60) eq 60}" value="#{(event.endDate.time - event.startDate.time)/(1000*60*60)} hrs"/>
														<h:outputText rendered="#{(event.endDate.time - event.startDate.time)/(1000*60) lt 60}" value="#{(event.endDate.time - event.startDate.time)/(1000*60)} min"/>
											   </p:column>
										   </c:if>
															
										</p:dataTable>
                                  </h:form>
                          </div>
                      </section>
                  </div>
              </div>
          </section>
          </div>
</ui:composition>
</html>