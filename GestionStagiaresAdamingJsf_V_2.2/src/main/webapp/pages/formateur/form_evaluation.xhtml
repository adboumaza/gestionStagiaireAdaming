
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:pe="http://primefaces.org/ui/extensions">


<ui:composition>
	<br> </br>
	<br> </br>
	<br> </br>
	<div class="well container">
		<br />
		 <!-- messages errors + exception -->  
		<p:growl id="growler" showDetail="true"  autoUpdate="true" severity="warn,info"></p:growl>
		<c:if test="#{fn:length(scheduleView.modules) > 0}">
		<section class="wrapper">
		  <div class="row">
				<div class="col-lg-12">
					<ol class="breadcrumb">
						<h3 class="page-header"><i><h:graphicImage name="NiceAdmin/img/form.png"/> </i> Form Évaluation</h3>
					</ol>
				</div>
			</div>            
              <div class="row">
                  <div class="col-lg-12">
                      <section class="panel">
                          <header class="panel-heading">
                              Évaluation étudiant
                          </header>
                          <div class="panel-body">
                              <div class="form">
                                  <h:form class="form-validate form-horizontal">
			                        <div class="form-group ">
                                          <label for="session" class="control-label col-lg-2">Session en Cours :</label>
                                          <div class="col-lg-10">
											<h:outputText value="Formation: #{scheduleView.sessionFormateur.specialite.designation}"/><br />
											
                                          </div>
                                     </div>
                                     <div class="form-group ">
	                                          <label for="module" class="control-label col-lg-2">Module <span class="required">*</span></label>
	                                          <div class="col-lg-10">
	                                              <h:selectOneMenu id="module" style="height:35px;width:50%;color:#797979;font-size:16px;" styleClass="selectpicker"
													value="#{scheduleView.idModule}">
													<f:selectItem itemLabel="Sélectionnez Un Module"
													itemValue="#{null}" />
												    <f:selectItems value="#{scheduleView.modules}" var="m"
													itemLabel="#{m[1]}" itemValue="#{m[0]}" />
											      </h:selectOneMenu>
	                                          </div>
	                                          <br></br>
	                                   <h:message for="module" style="text-align:center;color:red;display:block"></h:message>
	                                  </div>
	                                   
	                                  <div class="form-group">
	                                          <div class="col-lg-offset-2 col-lg-10">
	                                              <h:commandButton
														action="#{scheduleView.genererScheduleEvaluations}" 
														value="Generer" class="btn btn-primary" />
	                                          </div>
	                                   </div>
										<br />
										<br />
										<br />
									  <c:if test="#{scheduleView.active}">
										<c:if
											test="#{fn:length(scheduleView.students) >0 and fn:length(scheduleView.modules)>0}">
										 
											<div align="center">
												<!-- Message obligation-->
												<div class="champsObligatoire">
													<h:outputText
														value="Merci de remplir tous les champs du tableau ci-dessous afin que nous puissions rediriger toutes les informations  vers Nos clients.  " />
												</div>
												<br /> <br />
												<!-- more Informations width tag evaluation-->
												<ul class="inline">
													<li>Excellent -</li>
													<li class="green">.</li>
													<li>Très Bien -</li>
													<li class="green2">.</li>
													<li>Moyen -</li>
													<li class="yellow">.</li>
													<li>Passable -</li>
													<li class="orange">.</li>
													<li>Trop Juste -</li>
													<li class="red">.</li>
												</ul>
												<br /> <br />
							
												<p:dataTable reflow="true" var="e"
													value="#{scheduleView.students}" id="studentTable"
													editable="true" editMode="cell" widgetVar="cellSchedule"
													style="width:96%;margin-bottom:20px;">
							
													<f:facet name="header">
														<h:outputText value="Evaluation - Session n°: " />
														<h:outputText style="color:red;font-weight:bold;"
															value="#{scheduleView.sessionFormateur.idSession}" />
														<h:outputText style="color:red;font-weight:bold"
															value="  Formation : #{scheduleView.sessionFormateur.specialite.designation} ; " />
														
														<h:outputText style="color:red;font-weight:bold"
															value="  Début:#{scheduleView.sessionFormateur.dateDebute} ; " />
														<h:outputText style="color:red;font-weight:bold"
															value="  Fin:#{scheduleView.sessionFormateur.dateFin}" />
														<h:outputText style="color:red;font-weight:bold"
															value=" / Module:#{scheduleView.module.nomModule}" />
													</f:facet>
							
													<p:column style="width:100px;">
														<f:facet name="header">
															<h:outputText value="Nom" />
														</f:facet>
														<h:outputText value="#{e.nomEtudiant}" />
													</p:column>
													<p:column style="width:100px;">
														<f:facet name="header">
															<h:outputText value="Prenom" />
														</f:facet>
														<h:outputText value="#{e.prenomEtudiant}" />
													</p:column>
							
													<p:column style="width:300px;">
														<f:facet name="header">
															<h:outputText value="Compréhension" />
														</f:facet>
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{e.evaluation[0][0]}" style="cursor:pointer" />
															</f:facet>
															<f:facet name="input">
																<p:selectOneMenu value="#{e.evaluation[0][0]}" style="width:100%">
																	<f:selectItems value="#{e.evaluation[0]}" var="r"
																		itemLabel="#{r}" itemValue="#{r}" />
																</p:selectOneMenu>
															</f:facet>
														</p:cellEditor>
													</p:column>
													<p:column>
													    <f:facet name="header">
															<h:outputText value="Participation" />
														</f:facet>
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{e.evaluation[1][0]}" style="cursor:pointer" />
															</f:facet>
															<f:facet name="input">
																<p:selectOneMenu value="#{e.evaluation[1][0]}" style="width:100%">
																	<f:selectItems value="#{e.evaluation[1]}" var="c"
																		itemLabel="#{c}" itemValue="#{c}" />
																</p:selectOneMenu>
															</f:facet>
														</p:cellEditor>
													</p:column>
													<p:column>
													    <f:facet name="header">
															<h:outputText value="Application TP" />
														</f:facet>
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{e.evaluation[2][0]}" style="cursor:pointer" />
															</f:facet>
															<f:facet name="input">
																<p:selectOneMenu value="#{e.evaluation[2][0]}" style="width:100%">
																	<f:selectItems value="#{e.evaluation[2]}" var="c"
																		itemLabel="#{c}" itemValue="#{c}" />
																</p:selectOneMenu>
															</f:facet>
														</p:cellEditor>
													</p:column>
													<p:columnGroup type="footer">
														<p:row>
															<p:column colspan="2" style="text-align:center"
																footerText="Etudiant" />
															<p:column colspan="3" style="text-align:center;font-wieght:bold"
																footerText="Evaluation Module : #{scheduleView.module.nomModule}" />
														</p:row>
													</p:columnGroup>
												</p:dataTable>
							
												<p:commandButton value="générer un excel" id="xls" ajax="false">
													<f:setPropertyActionListener value="false"
														target="#{exporterController.customExporter}" />
													<pe:exporter type="xlsx" target="studentTable"
														fileName="GroupedTable" />
							
												</p:commandButton>
							
												<p:commandButton value="générer un pdf" id="pdf" ajax="false">
													<f:setPropertyActionListener value="false"
														target="#{exporterController.customExporter}" />
													<pe:exporter type="pdf" target="studentTable"
														fileName="GroupedTable" />
							
												</p:commandButton>
											</div>
										   </c:if>
										</c:if>
										<br />
									</h:form>
									</div>
		                       </div>
		                  </section>
		              </div>
				</div>
		    </section>
		    </c:if>
		</div>
</ui:composition>
</html>