<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition>
	<br> </br>
	<br> </br>
	<br> </br>

	<div class="well container">
		<!-- Form validations -->
		<section class="wrapper">
			<div class="row">
				<div class="col-lg-12">
					<ol class="breadcrumb">
						<h3 class="page-header">
							<i><h:graphicImage name="NiceAdmin/img/form.png" /> </i>
							Calendrier collaboratif #{agendaBean.user.name}
						</h3>
					</ol>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<section class="panel">
						<header class="panel-heading"> Programme </header>
						<div class="panel-body">

							<h:form>
								<p:growl id="messages" showDetail="true" />

								<h:panelGrid columnClasses="value">
									<h3 style="margin-top: 0">Programme de la semaine</h3>
									<p:schedule style="cursor:pointer!important" draggable="false"  id="schedule" value="#{agendaBean.eventModel}"
										widgetVar="myschedule" timeZone="GMT+2" locale="fr" lang="fr">

										<p:ajax event="dateSelect"
											listener="#{agendaBean.onDateSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
										<p:ajax event="eventSelect"
											listener="#{agendaBean.onEventSelect}"
											update="eventDetails" oncomplete="PF('eventDialog').show();" />
										
										
                                       
									</p:schedule>
								</h:panelGrid>

								<p:dialog widgetVar="eventDialog" header="les détails de l'événement"
									showEffect="clip" hideEffect="clip">
									<h:panelGrid id="eventDetails" columns="2">
										<p:outputLabel for="title" value="Titre:" />
										<p:inputText id="title" value="#{agendaBean.event.title}"
											required="true" />

										<p:outputLabel for="from" value="De:" />
										<p:calendar minHour="8" maxHour="18" locale="fr" lang="fr" id="from" value="#{agendaBean.event.startDate}"
											timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm" />

										<p:outputLabel for="to" value="A:" />
										<p:calendar minHour="8" maxHour="18" locale="fr" lang="fr" id="to" value="#{agendaBean.event.endDate}"
											timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm" />

										<c:if test="#{empty agendaBean.event.id}">
											<p:commandButton id="addButton" value="Save"
												actionListener="#{agendaBean.addEvent}"
												oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
										</c:if>
										<c:if test="#{not empty agendaBean.event.id}">
											<p:commandButton id="deleteButton" value="Delete" 
												actionListener="#{agendaBean.deleteEvent}"
												oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
											<p:commandButton id="updateButton" value="update" 
												actionListener="#{agendaBean.updEvent}"
												oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
									    </c:if>
									</h:panelGrid>
								</p:dialog>
							</h:form>

						</div>
					</section>
				</div>
			</div>
		</section>

		<SCRIPT type="text/javascript">
			PrimeFaces.locales['fr'] = {
				closeText : 'Fermer',
				prevText : 'Précédent',
				nextText : 'Suivant',
				monthNames : [ 'Janvier', 'Février', 'Mars', 'Avril', 'Mai',
						'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre',
						'Novembre', 'Décembre' ],
				monthNamesShort : [ 'Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun',
						'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc' ],
				dayNames : [ 'Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi',
						'Vendredi', 'Samedi' ],
				dayNamesShort : [ 'Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven',
						'Sam' ],
				dayNamesMin : [ 'D', 'L', 'M', 'M', 'J', 'V', 'S' ],
				weekHeader : 'Semaine',
				firstDay : 1,
				isRTL : false,
				showMonthAfterYear : false,
				yearSuffix : '',
				timeOnlyTitle : 'Choisir l\'heure',
				timeText : 'Heure',
				hourText : 'Heures',
				minuteText : 'Minutes',
				secondText : 'Secondes',
				currentText : 'Maintenant',
				ampm : false,
				month : 'Mois',
				week : 'Semaine',
				day : 'Jour',
				allDayText : 'Toute la journée'
			};
		</SCRIPT>
	</div>


</ui:composition>
</html>
