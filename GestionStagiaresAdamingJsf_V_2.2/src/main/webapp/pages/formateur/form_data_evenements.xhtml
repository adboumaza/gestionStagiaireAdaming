<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">

<ui:composition>
    <br></br>
	<section id="main-content">

		<!-- Form validations -->
		<section class="wrapper">
			<div class="row">
				<div class="col-lg-12" style="width: 97%;margin: auto">
					<ol class="breadcrumb">
						<h3 class="page-header" style="color:#00a19a">
							<i><h:graphicImage name="NiceAdmin/img/form.png" /> </i> Information Session - Toutes les Évènements
						</h3>
					</ol>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<section class="panel" style="width: 97%;margin: auto">
						
						<p:growl id="growl" autoUpdate="true" severity="info,warning"
							showSummary="true" showDetail="true"></p:growl>
						<div class="panel-body">

							<h:form>
								<div
									style="margin: auto !important; text-align: center; width: 70% !important">
									<br></br> <br></br>
									<p:selectOneRadio columns="1" layout="grid"
										value="#{sessionBean.choix}">
										<f:selectItem itemLabel="TeamLeader" itemValue="TOP" />
										<f:selectItem itemLabel="blackList" itemValue="WARNING" />
										<f:selectItem itemLabel="Absence" itemValue="ABSENCE" />
										<f:selectItem itemLabel="Retard" itemValue="RETARD" />
										<f:ajax
											listener="#{sessionBean.getMoreInformation(scheduleView.sessionFormateur.idSession,sessionBean.choix)}"
											render="@form idEvent" />
									</p:selectOneRadio>
								</div>
								<br></br>
								<br></br>

								<p:dataTable rendered="#{sessionBean.evenements.size() > 0}"
									id="idEvent" var="event" value="#{sessionBean.evenements}">
									<f:facet name="header">
										        #{sessionBean.choix}
										    </f:facet>

									<p:column headerText="Nom">
										<h:outputText value="#{event.etudiant.nomEtudiant}" />
									</p:column>
									<p:column headerText="Prénom">
										<h:outputText value="#{event.etudiant.prenomEtudiant}" />
									</p:column>
									<p:column headerText="Tél">
										<h:outputText  value="#{event.etudiant.numTel}" />
									</p:column>
									<p:column headerText="Mail">
										<h:outputText value="#{event.etudiant.mail}" />
									</p:column>
									
									<c:if test="#{(sessionBean.choix eq 'ABSENCE') || (sessionBean.choix eq 'RETARD')}">
										<p:column headerText="De">
											<h:outputText  value="#{event.startDate}" />
										</p:column>
										<p:column headerText="A">
											<h:outputText value="#{event.endDate}" />
										</p:column>
										
									</c:if>
									<p:column headerText="Supprimer" width="9%" style="text-align:center">
					                    <p:commandButton update="idEvent" icon="ui-icon-trash" title="Supprimer" action="#{scheduleView.deleteEvenement}">
					                        <f:setPropertyActionListener value="#{event}" target="#{scheduleView.evenement}"></f:setPropertyActionListener>
					                    </p:commandButton>
									</p:column>
								</p:dataTable>
								
							</h:form>
						</div>
					</section>
				</div>
			</div>
		</section>
		<SCRIPT type="text/javascript">
	                PrimeFaces.locales ['fr'] = { closeText: 'Fermer', prevText: 'Précédent', nextText: 'Suivant', monthNames: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre' ], monthNamesShort: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc' ], dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'], dayNamesShort: ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'], dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'], weekHeader: 'Semaine', firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix:'', timeOnlyTitle: 'Choisir l\'heure', timeText: 'Heure', hourText: 'Heures', minuteText: 'Minutes', secondText: 'Secondes', currentText: 'Maintenant', ampm: false, month: 'Mois', week: 'Semaine', day: 'Jour', allDayText: 'Toute la journée' };
	                                     
	           </SCRIPT>
	</section>
</ui:composition>
</html>