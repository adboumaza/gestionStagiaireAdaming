
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition>
	<br> </br>
	<p:dialog widgetVar="dlg2" width="75%" modal="true" height="490px">
              <div class="sk-circle">
			  <div class="sk-circle1 sk-child"></div>
			  <div class="sk-circle2 sk-child"></div>
			  <div class="sk-circle3 sk-child"></div>
			  <div class="sk-circle4 sk-child"></div>
			  <div class="sk-circle5 sk-child"></div>
			  <div class="sk-circle6 sk-child"></div>
			  <div class="sk-circle7 sk-child"></div>
			  <div class="sk-circle8 sk-child"></div>
			  <div class="sk-circle9 sk-child"></div>
			  <div class="sk-circle10 sk-child"></div>
			  <div class="sk-circle11 sk-child"></div>
			  <div class="sk-circle12 sk-child"></div>
			</div>
        </p:dialog>
	<section id="main-content">
        <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
        <p:growl id="growl" showDetail="true" autoUpdate="true" closable="true" />
		<c:if test="#{fn:length(scheduleView.modules) > 0}">
		<section class="wrapper">
		  <div class="row">
				<div class="col-lg-12" style="width: 97%;margin: auto">
					<ol class="breadcrumb">
						<h3 class="page-header" style="color:#00a19a"><i><h:graphicImage name="NiceAdmin/img/form.png"/> </i> Form Activation Module</h3>
					</ol>
				</div>
			</div>            
              <div class="row">
                  <div class="col-lg-12">
                      <section class="panel" style="width: 97%;margin: auto">
                          <div class="panel-body">
                              <div class="form">
                                  <div class="form-validate form-horizontal">
			                        <div class="form-group ">
                                          
                                          <div class="col-lg-10">
											<h:outputText value="Formation: #{scheduleView.sessionFormateur.specialite.designation}"/><br />
                                          </div>
                                     </div>
                                    
	                                  <div class="form-group alert alert-danger">
	                                          <div class="col-lg-offset-2 col-lg-10">
	                                               <p> * Avant de commencer un examen vous devez activer un module</p>
	                                               <p> * à la fin de chaque examen (Désactivé) le module</p>
	                                          </div>
	                                   </div>
	                                   <br/><br/>
	                                  
	                                   <div class="form-group" align="center">
	                                            
	                                            <h:form id="form10">
		                                             <p:dataTable style="width:90%" value="#{scheduleView.modules}" var="m">
		                                                
		                                               <p:column headerText="Module">
													        <h:outputText value="#{m[1]}" />
													    </p:column>
													 
													    <p:column  headerText="Authorisation">
													            <h:outputText value="Désactivé" rendered="#{not m[2]}"></h:outputText>
													            <h:outputText value="Activé" rendered="#{m[2]}" /> 
													            <p:spacer width="10"></p:spacer>
													            <h:graphicImage rendered="#{m[2]}"     name="NiceAdmin/img/checkbox.png"/> 
														        <h:graphicImage rendered="#{not m[2]}" name="NiceAdmin/img/disabled.png"/> 
													    </p:column>
													    <p:column style="width:100px;text-align:center;">
													        <f:facet name="header">
														         <h:outputText value="Activer" />
													       </f:facet>
													       <p:commandLink oncomplete="PF('actionDialog').show()"
															update=":form10:moduleDetail" title="Modifier">
															 <h:graphicImage name="NiceAdmin/img/pencil.png"></h:graphicImage>
															<f:param value="#{m[0]}" name="idModule" />
															<p:ajax update=":form10:moduleDetail" event="click"
																listener="#{scheduleView.getCurrentModule(m[0])}" />
												           </p:commandLink>
													    </p:column>
													    
													    <p:column  headerText="Visualisation" style="text-align:center;">
													           
														     <p:commandButton oncomplete="PF('actionDialog2').show()" 
															update=":form10:questionsDetail" styleClass="btn btn-danger" value="Voir le QCM">
														        <f:param value="#{m[0]}" name="idModule" />
														        <p:ajax  event="click"
																listener="#{scheduleView.getQuestionsAndResponse(m[0])}" />
																	
														     </p:commandButton>
													            
													    </p:column>
		                                             </p:dataTable> 
		                                             <p:dialog width="75%" height="50%"  draggable="false" header="QCM Info"  widgetVar="actionDialog2" modal="true"
														showEffect="blind" hideEffect="explode" resizable="false">
														<p:outputPanel style="overflow:scroll;text-align:center;height:500px;" id="questionsDetail">
															
														    <h:panelGroup>
																<p:dataTable scrollable="true"  id="responseTable" var="q" value="#{scheduleView.questions}">
																    <p:column headerText="N°">
																        <h:outputText value="#{q.numeroQuestion}" />
																    </p:column>
																    <p:column headerText="Question">
																        <h:outputText value="#{q.label}" />
																    </p:column>
																     <p:column headerText="Réponses">
																        <p:dataList value="#{q.reponses}" var="answer">
																            <p:column>
																                <h:outputText style="padding-right:10px;" value="#{answer.labelReponse}" />
																            </p:column>
																            <p:column>
																                <h:outputText rendered="#{answer.etat}"     value="TRUE" />
																		        <h:outputText rendered="#{not answer.etat}" value="FALSE" />
																		        <h:outputText style="padding-right:10px;"></h:outputText>
																		        <h:graphicImage rendered="#{answer.etat}"     name="NiceAdmin/img/check.png"/> 
														                        <h:graphicImage rendered="#{not answer.etat}" name="NiceAdmin/img/cross.png"/> 
																            </p:column>
																        </p:dataList>
																     </p:column>
																</p:dataTable>
																<br></br>
																<br></br>
																
												   		 </h:panelGroup>
												   		 
														</p:outputPanel>
														
													</p:dialog> 
		                                             <p:dialog header="Module Info" widgetVar="actionDialog" modal="true"
														showEffect="blind" hideEffect="explode" resizable="false">
														<p:outputPanel id="moduleDetail" style="text-align:center;">
															<h:inputHidden value="#{scheduleView.module.idModule}" />
														
															<h:inputHidden value="#{scheduleView.module.specialite.idSpecialite}" />
											
															<h:outputText value="designation" />
															<br />
															<h:inputText value="#{scheduleView.module.nomModule}" disabled="true"/>
															<br/><br/>
															<h:outputText value="Activation Du Module" />
															<br />
														    <p:selectOneMenu  value="#{scheduleView.module.actif}">
										
															<f:selectItem itemLabel="Autorisé"
																itemValue="true"/>
															<f:selectItem itemLabel="No Autorisé"
																itemValue="false"  />
															
														</p:selectOneMenu>
														</p:outputPanel>
														<br />
														<br />
														<p:commandButton onclick="PF('dlg2').show();" value="Appliquer" action="#{scheduleView.edit(scheduleView.module.specialite.idSpecialite)}" />
													</p:dialog>       
	                                             </h:form>
	                                   </div>
	                                 
									</div>
									</div>
		                       </div>
		                  </section>
		              </div>
				</div>
		    </section>
		  </c:if>
		</section>
</ui:composition>
</html>