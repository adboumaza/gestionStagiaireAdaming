<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">

<ui:composition>
	<br> </br>
	<br> </br>
	<br> </br>
	<div class="well container">
		<h:form id="form">
			<div class="inputpersso">
				<p:outputLabel for="session" value="*Session :"
					styleClass="paddingTop20" />
				<br />
				<p:selectOneMenu id="session" required="true"
					required-message="Veuillez Rensiegnez la Session SVP!!"
					renderLabel="true" value="#{noteBean.idSession}">
					<f:selectItem itemLabel="Sélectionnez Une Session"
						itemValue="#{null}" />
					<f:selectItems value="#{noteBean.sessions}" var="s"
						itemLabel="Session N°:#{s.idSession}, #{s.specialite.designation},Lieu : #{s.lieu}, Début:#{s.dateDebute}"
						itemValue="#{s.idSession}" />
					<p:ajax event="valueChange" update="module"
						listener="#{noteBean.getAllModulesBySession}" render="module" />
				</p:selectOneMenu>
				<br />
				<h:message for="session" />
				<br></br>
				<p:outputLabel for="module" value="Module:"
					styleClass="paddingTop20" />
				<br />
				<p:selectOneMenu id="module" required="true"
					required-message="Veuillez Rensiegnez la Session SVP!!"
					renderLabel="true" value="#{noteBean.idModule}">
					<f:selectItem itemLabel="Sélectionnez Un Module"
						itemValue="#{null}" noSelectionOption="true" />
					<f:selectItems value="#{noteBean.modules}" var="m"
						itemLabel="#{m.nomModule},N°(#{m.idModule})"
						itemValue="#{m.idModule}" />
						<p:ajax event="valueChange" update="studentTable"
						listener="#{noteBean.getAllNotesByModule}" render="studentTable" />
				</p:selectOneMenu>
				<br />
				<h:message for="module" />
				<br />
				<br />
			</div>
			 <div align="center">
					<p:dataTable var="newNote"
						value="#{noteBean.notes}" id="studentTable"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
						paginator="true" rows="10" style="width:75%;margin-bottom:20px;">

						<f:facet name="{Exporters}">
							<p:commandLink ajax="false" style="float:right;"
								title="Fichier XML">
								<p:graphicImage name="NiceAdmin/img/xml.png" width="24" />
								<p:dataExporter type="xml" target=":form:studentTable"
									fileName="Notes_Session_N°_#{noteBean.idSession}_Module_N°_#{noteBean.idModule}" />
							</p:commandLink>

							<p:commandLink ajax="false" style="float:right;"
								title="Fichier CSV">
								<p:graphicImage name="NiceAdmin/img/csv.png" width="24" />
								<p:dataExporter type="csv" target=":form:studentTable"
								   fileName="Notes_Session_N°_#{noteBean.idSession}_Module_N°_#{noteBean.idModule}" />
							</p:commandLink>

							<p:commandLink ajax="false" style="float:right;"
								title="Fichier PDF">
								<p:graphicImage name="NiceAdmin/img/pdf.png" width="24" />
								<p:dataExporter type="pdf" target=":form:studentTable"
									fileName="Notes_Session_N°_#{noteBean.idSession}_Module_N°_#{noteBean.idModule}" />
							</p:commandLink>

							<p:commandLink ajax="false" style="float:right;"
								title="Fichier EXCEL">
								<p:graphicImage name="NiceAdmin/img/excel.png" width="24" />
								<p:dataExporter type="xls" target=":form:studentTable"
									fileName="Notes_Session_N°_#{noteBean.idSession}_Module_N°_#{noteBean.idModule}" />
							</p:commandLink>
						</f:facet>
						<f:facet name="header">
							<h:outputText value="Liste Des Notes Module N° " />
							<h:outputText style="color:red;font-weight:bold;"
								value="#{noteBean.idSession}" />
						</f:facet>

						<p:column style="width:150px;">
							<f:facet name="header">
								<h:outputText value="Nom :" />
							</f:facet>
							
								<h:outputText style="text-align:center!important;display:block" value="#{newNote.etudiant.nomEtudiant}" />
							
						</p:column>
						
						<p:column style="width:150px;">
							<f:facet name="header">
								<h:outputText value="Prénom :" />
							</f:facet>
						
								<h:outputText style="text-align:center!important;display:block" value="#{newNote.etudiant.prenomEtudiant}" />
						
						</p:column>
						
						<p:column style="width:150px;">
							<f:facet name="header">
								<h:outputText value="Module" />
							</f:facet>
							
								<h:outputText style="text-align:center!important;display:block" value="#{newNote.module.nomModule}" />
							
						</p:column>
						
						<p:column style="width:150px;">
							<f:facet name="header">
								<h:outputText value="Note" />
							</f:facet>
							
								<h:outputText style="text-align:center!important;display:block" value="#{newNote.score}" />
						
						</p:column>
					</p:dataTable>
				</div>
		</h:form>
</div>
	<br />
</ui:composition>
</html>